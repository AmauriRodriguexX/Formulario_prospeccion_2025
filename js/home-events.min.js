let ssSource="",productoSeleccionado;function pushDataLayer(e,t={},a="NA"){window.dataLayer=window.dataLayer||[];let n={event:e,CDCategory:a,CDFunnel:document.querySelector("input[name='rbCliente']:checked")?.value==="Si"?"cliente":"no_cliente",CDSource:ssSource,...t};window.dataLayer.push(n)}function pushGenerateLeadCliente(){let e="Registro exitoso - OK",t="";if(null!=document.getElementById("txbNombre")){let a=document.getElementById("txbNombre").value;(a.toLowerCase().includes("prueba")||a.toLowerCase().includes("test"))&&(e="Test exitoso - prueba",t=a)}window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"generate_lead_cliente",CDCategory:document.getElementsByName("answer_question_2_1")[0].value,CDFunnel:"cliente",CDSource:ssSource,CDAction:e,pantalla:"pantalla_2",CDValue:t,CDLabel:document.getElementsByName("answer_question_4_1")[0].value,lead_id:localStorage.getItem("lead_id"),submit_result:"OK",detail:"sin error"})}function pushGenerateLead(){let e=document.getElementById("diaSelect")?.value.trim()||"0",t=document.getElementById("mesSelect")?.value.trim()||"0",a=document.getElementById("anioSelect")?.value.trim()||"0",n="0"!==document.getElementById("horaSelect")?.value.trim(),o=document.getElementById("avisoPrivacidad")?.checked||!1;if(document.getElementsByName("answer_question_2_1")[0].value,!("0"!==e&&"0"!==t&&"0"!==a)||!n||!o)return;var l={negocio:document.querySelector("input[name='rbNegocio']:checked")?.value||"no",duracion_negocio:document.querySelector("#q3_1 input[name='rbNegocio']:checked")?.value==="Si"?"6 meses":"menos de 6 meses",tipo_telefono:document.getElementById("telefonoSelect")?.value||"no_definido",horario_llamada:document.getElementById("horaSelect")?.value||"no_definido",lead_id:localStorage.getItem("lead_id")};let i="Registro exitoso - OK",r="";if(null!=document.getElementById("txbNombre")){let c=document.getElementById("txbNombre").value;(c.toLowerCase().includes("prueba")||c.toLowerCase().includes("test"))&&(i="Test exitoso - prueba",r=c)}window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"generate_lead",CDCategory:"NA",CDFunnel:"no_cliente",CDSource:ssSource,CDAction:i,pantalla:"pantalla_2",CDValue:r,negocio:l.negocio,duracion_negocio:l.duracion_negocio,tipo_telefono:l.tipo_telefono,horario_llamada:l.horario_llamada,lead_id:l.lead_id,submit_result:"OK",detail:"sin error"})}function pushUnifiedDataLayer(){let e=document.getElementById("horaSelect");"0"!=e.value?pushGenerateLead():pushGenerateLeadCliente()}function clickSenderDatakayer(){let e=document.getElementById("txbNombre");""!=e.value&&pushUnifiedDataLayer()}window.addEventListener("DOMContentLoaded",function(){nombre_cliente=this.localStorage.getItem("CompartamosNombre"),$("#gracias_cliente").text("\xa1Gracias "+nombre_cliente+"!");let e=sessionStorage.getItem("gtm_source");ssSource=null!=e&&""!=e?e:"";let t=sessionStorage.getItem("step-1");if(null!=t&&""!=t){let a=JSON.parse(t),n=a["question-1"],o=a["question-2"];ssSource=""===ssSource?`LPInst:${n}-Monto:${o}`:`${ssSource}|LPInst:${n}-Monto:${o}`}}),document.addEventListener("DOMContentLoaded",function(){let e=!1,t=!1,a;document.querySelectorAll(".radioButonsForm").forEach(t=>{t.addEventListener("click",function(){let a=t.querySelector("input[type='radio']");a&&(a.checked=!0,e||(pushDataLayer("form_start",{pantalla:"pantalla_1-0%"}),e=!0))})}),a=document.getElementById("q3_2"),a&&a.addEventListener("click",function e(){t||setTimeout(()=>{""==document.getElementsByName("answer_question_2_1")[0].value?pushDataLayer("form_start",{pantalla:"pantalla_2-90%"}):window.dataLayer.push({event:"form_start",CDCategory:document.getElementsByName("answer_question_2_1")[0].value,CDFunnel:"cliente",CDSource:ssSource,pantalla:"pantalla_4-90%",CDLabel:document.getElementsByName("answer_question_4_1")[0].value}),t=!0},50)},{once:!0})}),document.addEventListener("DOMContentLoaded",function(){let e={txbNombre:"01. Nombre",txbApPaterno:"02. Primer apellido",txbApMaterno:"03. Segundo apellido",diaSelect:"04. Fecha nacimiento - D\xeda",mesSelect:"05. Fecha nacimiento - Mes",anioSelect:"06. Fecha nacimiento - A\xf1o",rbFemenino:"07. G\xe9nero",rbMasculino:"07. G\xe9nero",telefonoSelect:"08. Tipo Tel\xe9fono",txbNumeroTel:"09. Tel\xe9fono",horaSelect:"10. Horario",txbCP:"11. C\xf3digo Postal",txbCorreoElectronico:"12. Correo electr\xf3nico",avisoPrivacidad:"13. Aviso privacidad"};function t(t){if(""==document.getElementsByName("answer_question_2_1")[0].value){let a=t.target,n=e[a.id],o=document.getElementsByName("answer_question_2_1")[0].value;n&&!a.dataset.tracked&&(window.dataLayer.push({event:"form_field",CDCategory:""==o?"NA":o,CDFunnel:"no_cliente",CDSource:window.ssSource||"",pantalla:"pantalla_2-80%",field_name:n}),a.dataset.tracked="true")}}document.addEventListener("focusin",function(a){a.target.id in e&&t(a)}),document.addEventListener("click",function(a){a.target.id in e&&t(a)})}),document.addEventListener("DOMContentLoaded",function(){function e(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_element",CDAction:e,CDCategory:localStorage.getItem("tipoCredito"),CDFunnel:"Si"==localStorage.getItem("cliente")?"Cliente":"No cliente",CDLabel:localStorage.getItem("productoAdicional"),link_text:t})}document.querySelector(".finance-btn.primary-btn")?.addEventListener("click",function(){e("Clic Ir a blog","Ir a blog")}),document.querySelector(".finance-btn.secondary-btn")?.addEventListener("click",function(){e("Clic Sitio oficial","Sitio oficial")})}),document.addEventListener("DOMContentLoaded",function(){function e(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_element",CDAction:e,CDCategory:localStorage.getItem("tipoCredito"),CDFunnel:"Si"==localStorage.getItem("cliente")?"Cliente":"No cliente",CDLabel:localStorage.getItem("productoAdicional"),link_text:t})}document.querySelector("a[href*='play.google.com']")?.addEventListener("click",function(){e("Clic Descarga App","Google Play")}),document.querySelector("a[href*='appgallery.huawei.com']")?.addEventListener("click",function(){e("Clic Descarga App","AppGallery")}),document.querySelector("a[href*='apps.apple.com']")?.addEventListener("click",function(){e("Clic Descarga App","App Store")})});