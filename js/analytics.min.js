sessionStorage.getItem("gtm_source")||sessionStorage.setItem("gtm_source","default_tracking_source"),window.ssSource=sessionStorage.getItem("gtm_source")||"default_source",console.log("✅ ssSource definido en analytics.js:",window.ssSource),sessionStorage.getItem("gtm_source")||sessionStorage.setItem("gtm_source","default_tracking_source"),window.ssSource=sessionStorage.getItem("gtm_source")||"default_tracking_source",console.log("✅ ssSource definido en analytics.js:",window.ssSource),window.addEventListener("DOMContentLoaded",function(){let e=window.ssSource,o=sessionStorage.getItem("step-1");if(null!=o&&""!=o){let t=JSON.parse(o),i=t["question-1"],a=t["question-2"];e="default_tracking_source"===e?`LPInst:${i}-Monto:${a}`:`${e}|LPInst:${i}-Monto:${a}`}window.ssSource=e,console.log("\uD83D\uDCE2 ssSource despu\xe9s de Landing Page:",window.ssSource),formSolicitaCredito(1,"\xbfTienes un cr\xe9dito activo con Compartamos Banco?","#DrbCSi, #DrbCNo","obligatorio",!0),formSolicitaCredito(2,"\xbfTienes un negocio?","#DrbSi, #DrbNo","obligatorio",!0),formSolicitaCredito(3,"\xbfTu negocio tiene m\xe1s de 6 meses?","#DrtimeSi, #DrtimeNo","obligatorio",!0),formSolicitaCredito(4,"Tel\xe9fono: Tipo","#telefonoSelect","obligatorio"),formSolicitaCredito(5,"Tel\xe9fono: N\xfamero","#txbNumeroTel","obligatorio"),formSolicitaCredito(6,"\xbfA qu\xe9 hora deseas recibir nuestra llamada?","#horaSelect","obligatorio"),formSolicitaCredito(7,"Correo electr\xf3nico","#txbCorreoElectronico","opcional"),formSolicitaCredito(8,"Le\xed y acepto el Aviso de Privacidad","#avisoPri","obligatorio"),formDatosPersonales(1,"Nombre(s)","#txbNombre","obligatorio"),formDatosPersonales(2,"Primer apellido","#txbApPaterno","obligatorio"),formDatosPersonales(3,"Segundo apellido","#txbApMaterno","opcional"),formDatosPersonales(4,"Fecha de nacimiento: D\xeda","#diaSelect","obligatorio"),formDatosPersonales(5,"Fecha de nacimiento: Mes","#mesSelect","obligatorio"),formDatosPersonales(6,"Fecha de nacimiento: A\xf1o","#a\xf1oSelect","obligatorio"),formDatosPersonales(7,"G\xe9nero","#rdbF, #rdbM","obligatorio",!0),formDatosPersonales(8,"C\xf3digo postal","#txbCP","obligatorio");var r=document.querySelector(".btnRegreso");null!=r&&r.addEventListener("click",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click",event_category:"forms",method:"clic btnRegreso",detail:"Regreso Pantalla 1"})})});var clickAll=0,formStart1=!1,formStart2=!1,fieldId="-",fieldValue="-",fieldType="-",creditoFields=7,creditoFieldsMandatory=6;function formSolicitaCredito(e,o,t,i,a=!1){var r=0;fields=document.querySelectorAll(t);var l=a?fields.length:0;for(let n=0;n<fields.length;n++)fieldEvent="select-one"==fields[n].type?"change":"click",fields[n].addEventListener(fieldEvent,function(){r++,clickAll++,a?(fieldId=(fieldInput=this.querySelector("input")).id,fieldValue=fieldInput.value,fieldType="radio"):(fieldId=this.id,fieldValue="select-one"==this.type||"checkbox"==this.type?this.value:"dato personal",l="select-one"==this.type?this.options.length:this.type,fieldType=this.type),formStart1||(formStart1=!0,window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_start",event_category:"forms",form_name:"prospecci\xf3n - solicita tu cr\xe9dito",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:creditoFields,n_form_fields:creditoFieldsMandatory,field_position:e,field_name:o,field_id:fieldId,field_n_options:l,field_type:fieldType,field_value:fieldValue,pantalla:"pantalla_1",mandatory_field:i,field_clic_n:r,step_number:1,clic_number:clickAll,form_target:"segmentar",CDSource:ssSource})),"rbSi"===fieldId&&(creditoFields=8,creditoFieldsMandatory=7);var t={event:"form_field",event_category:"forms",form_name:"prospecci\xf3n - solicita tu cr\xe9dito",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:creditoFields,n_form_fields:creditoFieldsMandatory,field_position:e,field_name:o,field_id:fieldId,field_n_options:l,field_type:fieldType,field_value:fieldValue,pantalla:"pantalla_1",mandatory_field:i,field_clic_n:r,step_number:e,clic_number:clickAll,CDSource:ssSource};"rbCSi"===fieldId?(window.dataLayer=window.dataLayer||[],t.form_target="segmentar",window.dataLayer.push(t),window.adobeDataLayer.push({event:"virtualPage",pageName:"Prospecci\xf3n - Solicita tu cr\xe9dito - Es cliente",pageUrl:"https://www.compartamos.com.mx/prospeccion/ya_cliente",referringUrl:"https://www.compartamos.com.mx/prospeccion/",primaryCategory:"Landing page - Prospecccion de clientes",domain:window.location.hostname,subcategoryLink:"-",pageInstanceID:"Prospecci\xf3n de clientes"})):(window.dataLayer=window.dataLayer||[],window.dataLayer.push(t))})}function formDatosPersonales(e,o,t,i,a=!1){var r=0;fields=document.querySelectorAll(t);var l=a?fields.length:0;for(let n=0;n<fields.length;n++)fieldEvent=a||"#txbCP"==t?"click":"change",fields[n].addEventListener(fieldEvent,function(){r++,clickAll++,a?(fieldId=(fieldInput=this.querySelector("input")).id,fieldType="radio"):(fieldId=this.id,l="select-one"==this.type?this.options.length:this.type,fieldType=this.type),formStart2||(formStart2=!0,window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_start",event_category:"forms",form_name:"prospecci\xf3n - datos personales",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:8,n_form_fields:7,field_position:e,field_name:o,field_id:fieldId,field_n_options:l,field_type:fieldType,field_value:"dato personal",pantalla:"pantalla_2",mandatory_field:i,field_clic_n:r,step_number:e,clic_number:clickAll,form_target:"lead",CDSource:ssSource})),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_field",event_category:"forms",form_name:"prospecci\xf3n - datos personales",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:8,n_form_fields:7,field_position:e,field_name:o,field_id:fieldId,field_n_options:l,field_type:fieldType,field_value:"dato personal",pantalla:"pantalla_2",mandatory_field:i,field_clic_n:r,step_number:e,clic_number:clickAll,CDSource:ssSource})})}var clickSiguiente=0;function siguienteCreditoActivoSi(){clickAll++,clickSiguiente++,window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"eventgtm",eventName:"Siguiente",category:"prospeccion",eventLabel:"si"}),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_submit",event_category:"forms",form_name:"prospecci\xf3n - solicita tu cr\xe9dito",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:1,n_form_fields:1,field_position:1,field_name:"bot\xf3n siguiente pantalla 1.1",field_id:"botonGeneralDatosContacto",field_type:"bot\xf3n",field_value:"siguiente",pantalla:"pantalla_1.1",field_clic_n:clickSiguiente,step_number:3,clic_number:clickAll,form_target:"segmentar",submit_result:"OK",detail:"env\xedo correcto",CDSource:ssSource}),sessionStorage.removeItem("step-1"),sessionStorage.removeItem("gtm_source")}function siguienteCreditoActivoNo(){clickAll++,clickSiguiente++,window.dataLayer.push({event:"eventgtm",eventName:"Siguiente",category:"prospeccion",eventLabel:"no"}),formSubmitSolicitaCredito("OK","env\xedo correcto"),window.adobeDataLayer.push({event:"virtualPage",pageName:"Prospecci\xf3n - Datos personales",pageUrl:"https://www.compartamos.com.mx/prospeccion/datos_personales",referringUrl:"https://www.compartamos.com.mx/prospeccion/",primaryCategory:"Landing page - Prospecccion de clientes",domain:window.location.hostname,subcategoryLink:"-",pageInstanceID:"Prospecci\xf3n de clientes"}),window.adobeDataLayer.push({event:"formulario",tipoFormulario:"embudo",nombreEmbudo:"solicita credito",pasoEmbudo:"1",nombreFormulario:"solicita tu credito"})}function formSubmitSolicitaCredito(e,o){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_submit",event_category:"forms",form_name:"prospecci\xf3n - solicita tu cr\xe9dito",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:creditoFields,n_form_fields:creditoFieldsMandatory,field_position:9,field_name:"bot\xf3n siguiente pantalla 1",field_id:"botonGeneralDatosContacto",field_type:"bot\xf3n",field_value:"siguiente",pantalla:"pantalla_1",field_clic_n:clickSiguiente,step_number:9,clic_number:clickAll,form_target:"segmentar",submit_result:e,detail:o,CDSource:ssSource})}function formSubmitDatosPersonales(e,o){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_submit",event_category:"forms",form_name:"prospecci\xf3n - datos personales",form_id:"formularioProspeccion",form_type:"multistep din\xe1mico",form_fields:9,n_form_fields:8,field_position:9,field_name:"Enviar",field_id:"botonGeneralDatosPersonales",field_type:"bot\xf3n",field_value:"Enviar",pantalla:"pantalla_2",field_clic_n:1,step_number:9,clic_number:clickAll,form_target:"Lead",submit_result:e,detail:o,CDSource:ssSource})}function generateLead(e){let o=document.getElementById("telefonoSelect"),t=document.getElementById("horaSelect"),i=localStorage.getItem("antiguedad"),a=document.getElementById("rbSi").checked?"Si":"No",r="Registro exitoso - OK",l="";if(null!=document.getElementById("txbNombre")){let n=document.getElementById("txbNombre").value;(n.toLowerCase().includes("prueba")||n.toLowerCase().includes("test"))&&(r="Registro exitoso - TEST",l=n)}window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_complete",event_category:"forms",CDAction:r,CDValue:l,form_name:"prospecci\xf3n",form_id:"formularioProspeccion",lead_id:e,form_fields:16,n_form_fields:14,element_text:"enviar",submit_result:"OK",detail:"Sin error",credito_activo:"No",negocio:a,duracion_negocio:i,tipo_telefono:o.options[o.selectedIndex].text,horario_llamada:t.options[t.selectedIndex].text,CDSource:ssSource}),window.adobeDataLayer.push({event:"formulario",CDAction:r,CDValue:l,tipoFormulario:"embudo",nombreEmbudo:"datos personales",pasoEmbudo:"2",nombreFormulario:"solicita tu credito"}),sessionStorage.removeItem("step-1"),sessionStorage.removeItem("gtm_source")}""===ssSource&&(ssSource="default_source");